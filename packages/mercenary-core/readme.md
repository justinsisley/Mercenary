# Mercenary

### Unit Tests

Mercenary has support for Mocha, Chai, and Istanbul baked in, and it will find all files named __unit.js__ and execute them.

Let's create a sample test. Using your terminal, create a test file: `touch client/unit.js`.

Using your editor, open __client/unit.js__ and add the following code:

```javascript
describe('test', () => {
  it('passes', () => {
    assert.isTrue(true);
  });

  it('fails', () => {
    assert.isTrue(false);
  });
});

```

Save __client/unit.js__, then go back to your terminal and run: `npm test`. You should see the output of the test results. A __coverage__ directory will also be created, with test coverage reporting provided by Istanbul.

> Notice that you didn't need to import `describe`, `it`, or `assert`. Mocha's `describe` and `it`, and Chai's `assert` methods are globally available in all of your tests.

Congratulations. You've created your first unit test without having to worry about any configuration or complex setup.

### End-to-end Tests

Mercenary has support for running end-to-end tests using Nightwatch. It will find all files named __e2e.js__ and execute them.

Let's create a sample end-to-end test. Using your terminal, create a test file: `touch client/e2e.js`.

Using your editor, open __client/e2e.js__ and add the following code:

```javascript
module.exports = {
  'example e2e test': function(browser) {
    browser
    .url('http://localhost:3325')
    .waitForElementVisible('body', 1000)
    .assert.title('Mercenary')
    .end();
  },
};

```

Save __client/e2e.js__, then go back to your terminal and run: `npm run e2e`. You should see the output of the test results. A __reports__ directory will also be created, which contains test results generated by Nightwatch.

Congratulations! You've created your first end-to-end test. Just like with your unit test, you didn't have to spend any time settings up tools and configuration files.

## Production

While mercenary does a lot to optimize the development experience, it also makes deployment a breeze.

To build all static assets and start the production server, run `npm run prod`.

Once your __deploy.js__ file is configured, you can deploy a Docker container running in production mode to AWS EBS using `npm run deploy`.

To test the Docker container locally, run `npm run docker` to generate a Dockerfile. Then run something like:

```bash
docker build -t my-app .
docker run -p 3325:3325 -d my-app
```